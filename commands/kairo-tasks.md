---
description: 根据设计文档将实现任务以1天为单位进行分割,按1个月为单位的阶段进行整理。用单独文件管理各任务,考虑依赖关系以适当的顺序进行管理。
allowed-tools: Read, Glob, Grep, Task, Write, Edit, TodoWrite, WebFetch, AskUserQuestion
argument-hint: [需求名称]
---

# kairo-tasks

## 目的

根据设计文档将实现任务以1天为单位进行分割,按1个月为单位的阶段进行整理。为各任务创建单独文件,考虑依赖关系以适当的顺序进行管理。

## 前提条件

- `docs/design/{需求名称}/` 中存在设计文档
- 设计已被用户批准(或省略批准)
- `docs/tasks/` 目录存在(如果不存在则创建)
- 思考用英语进行。文件用中文描述
- task_id 设为 `TASK-{4位数字}` (例 TASK-0001)

# context

输出目录="docs/tasks"
需求名称={{requirement_name}}
作業規模={{work_scope}}
可靠性评估=[]

# step

- 如果没有$ARGUMENTS,显示"请在参数中指定需求名称(例:用户认证系统)"后结束
- 向用户声明$ARGUMENTS的内容和context的内容
- 执行step2

## step2: 确认工作规模

- 使用AskUserQuestion工具询问工作规模:
  - question: "请告诉我此任务分割的工作规模"
  - header: "工作规模"
  - multiSelect: false
  - options:
    - label: "详细任务分割(推荐)"
      description: "详细的实现步骤、全面的测试用例、完整的依赖关系分析、包含UI/UX需求"
    - label: "轻量任务分割"
      description: "必要最小限的任务定义、仅基本实现步骤、仅主要依赖关系"
    - label: "自定义"
      description: "单独选择要包含的项目"

- 将用户的选择保存到context的{{work_scope}}

- 如果选择了自定义,使用AskUserQuestion工具询问以下内容:
  - question: "请选择要包含在任务定义中的项目(可多选)"
  - header: "包含项目"
  - multiSelect: true
  - options:
    - label: "详细的实现步骤"
      description: "逐步的实现指南"
    - label: "全面的测试用例"
      description: "单元·集成测试的详细定义"
    - label: "UI/UX需求详细化"
      description: "加载状态·错误显示·移动端对应等"
    - label: "依赖关系详细分析"
      description: "任务间依赖关系的详细分析"

- 执行step3

## step3: 准备开发上下文

- **读取任务笔记**
  - 如果`docs/spec/{需求名称}/note.md`存在则读取
  - 如果不存在:
    - 使用Task工具执行subagent_type: "general-purpose"来运行`/tsumiki:kairo-tasknote {需求名称}`命令生成笔记
    - 读取生成的笔记文件
  - 笔记包含技术栈、开发规则、相关实现、设计文档、注意事项

- **读取附加规则**
  - 如果`docs/rule`目录存在则读取
  - 如果`docs/rule/kairo`目录存在则读取
  - 如果`docs/rule/kairo/tasks`目录存在则读取
  - 读取各目录内的所有文件,作为附加规则应用

- **读取技术栈定义**
  - 如果`docs/tech-stack.md`存在则读取
  - 如果不存在则从`CLAUDE.md`读取技术栈部分
  - 两者都不存在的情况使用`.claude/commands/tech-stack.md`的默认定义

- **读取需求定义·设计文档**
  - 读取`docs/spec/{需求名称}-requirements.md`或`docs/spec/{需求名称}/requirements.md`
  - 读取`docs/design/{需求名称}/architecture.md`
  - 读取`docs/design/{需求名称}/database-schema.sql`
  - 读取`docs/design/{需求名称}/api-endpoints.md`
  - 读取`docs/design/{需求名称}/interfaces.ts`
  - 读取`docs/design/{需求名称}/dataflow.md`
  - 根据读取的技术栈定义特定实现技术

- **确认现有任务文件**
  - 使用@agent-symbol-searcher搜索现有任务ID,用Read工具读取找到的任务文件
  - 用Read工具读取现有的`docs/tasks/{需求名称}-TASK-*.md`文件
  - 提取已使用的任务编号(TASK-0000格式)
  - 为新任务分配不重复的编号

- 执行step4

## step4: 任务分析和访谈

根据工作规模调整访谈项目。
**重要**:以下问题是示例,应根据实际项目情况使用AskUserQuestion工具创建适当的问题。

### 详细任务分割的情况

对于每个类别,使用AskUserQuestion工具询问从设计文档中识别的具体课题·不明点:

**确认任务粒度**
- 确认以1天(8小时)的任务粒度是否有问题
- 如果需要更细的分割则询问具体单位

例:使用AskUserQuestion工具如下询问
- question: "关于任务粒度,以1天(8小时)为单位是否有问题?"
- header: "任务粒度"
- multiSelect: false
- options:
  - label: "1天单位没问题"
    description: "8小时单位的任务分割"
  - label: "需要更细的分割"
    description: "半天(4小时)单位等更细的分割(在其他中填写详细内容)"

**确认实现优先级**
- 如果需要确认设计文档的实现顺序则询问
- 询问可并行执行的任务的优先级
- 询问阶段分割的标准

**确认技术约束**
- 如果需要确认技术栈的选择则询问
- 询问性能需求的实现方法
- 询问外部系统集成的时机

**详细化测试需求**
- 询问单元测试的覆盖率目标
- 询问集成测试的实施范围
- 询问E2E测试的实施时机

**详细确认UI/UX实现**
- 询问加载状态的实现方针
- 询问错误显示的详细信息
- 询问移动端对应的范围
- 询问无障碍需求的详细信息

### 轻量任务分割的情况

**仅确认必需项目**
使用AskUserQuestion工具,简洁地询问以下项目:
- 确认主要任务的执行顺序
- 确认基本依赖关系
- 确认最低限度的测试需求

### 自定义的情况

仅实施与step2中选择项目相关的访谈。
使用AskUserQuestion工具,根据选择的项目创建问题。

**注意事项**:
- 不要一次性提出所有问题,而是根据上下文逐步提问
- 根据用户的回答,必要时进行追加提问
- 问题应具体,能用是/否回答或从选项中选择
- 如果需要自由描述,准备"其他"选项

**创建访谈记录**:
- 记录所有问题和回答
- 对于每个问题,记录以下内容:
  - 问题内容
  - 提问日期时间
  - 类别(任务粒度/优先级/技术约束/测试需求/UI需求)
  - 问题背景(为什么需要这个问题)
  - 用户的回答
  - 对可靠性的影响(此回答如何改变可靠性级别)
- 创建访谈结果摘要

- 执行step5

## step5: 创建任务

**【重要】**:在此步骤中,需要创建识别出的所有任务文件。中途不要停止。

**【可靠性级别指示】**:
对于各项目,请用以下信号注释与原始资料(需求定义书·设计文档·用户访谈)的对照情况:

- 🔵 **绿灯**: 参考需求定义书·设计文档·用户访谈几乎没有推测的情况
- 🟡 **黄灯**: 根据需求定义书·设计文档·用户访谈进行合理推测的情况
- 🔴 **红灯**: 需求定义书·设计文档·用户访谈中没有的推测情况

### 5.1 识别任务

根据设计文档,按以下类别识别任务:

- 基础任务(数据库设置、环境构建等)
- 后端任务(API实现)
- 前端任务(UI实现)
  - 按屏幕组细分
- 集成任务(E2E测试等)

**识别记录**:
- 记录识别的任务总数
- 记录各类别的任务数
- 此总数需要与step5.6创建的文件数一致

### 5.2 分析依赖关系

- 明确任务间的依赖关系
- 识别可并行执行的任务
- 识别关键路径

### 5.3 详细化任务

为各任务包含以下内容:
- 任务ID(TASK-0000格式)
- 任务名称
- 任务类型(TDD/DIRECT)
  - **TDD**: 编码、业务逻辑实现、UI实现、测试实现等开发工作
  - **DIRECT**: 环境构建、配置文件创建、文档创建、构建设置等准备工作
- 需求链接
- 依赖任务
- 实现详细(附可靠性级别)
- 单元测试需求(附可靠性级别)
- 集成测试需求(附可靠性级别)
- UI/UX需求(如适用,附可靠性级别)
  - 加载状态
  - 错误显示
  - 移动端对应
  - 无障碍需求
- 任务整体可靠性级别评估

### 5.4 任务排序

- 根据依赖关系决定执行顺序
- 设置里程碑
- 将可并行执行的任务分组

### 5.5 阶段分割

- 以1天为单位的粒度设计各任务
- 将任务在1个月(假定20天)以内的期间分割为阶段
  - 阶段目标在180小时以内
  - 阶段分割以架构层为标准
  - 不以事前考虑的分割标准为前提

### 5.6 创建单独任务文件

- **重要**: 为各任务创建单独文件
- **必需**: 创建step5.1识别的所有任务文件(中途不停止)
- **按阶段并行处理**: 使用Task工具按阶段并行执行多个阶段,高效创建文件
- 根据工作规模选择<task_template>:
  - 详细任务分割: <full_task_template>
  - 轻量任务分割: <minimal_task_template>
  - 自定义: 根据选择项目的组合

- **创建过程**:
  1. 确认step5.1识别的全任务列表
  2. 按阶段整理识别的全任务信息(任务ID、任务名、类型、工时、阶段、依赖关系、实现详细、测试需求等)
  3. **按阶段并行执行Task工具** (在1个消息中发送多个Task tool calls):
     - Phase 1任务用的Task tool call
     - Phase 2任务用的Task tool call
     - Phase 3任务用的Task tool call
     - Phase 4任务用的Task tool call
     - (根据阶段数调整)
  4. 在各Task tool call中指定包含以下内容的详细提示:
     - 该阶段的任务列表(任务编号、任务名、类型、依赖关系等)
     - 各任务的详细信息(实现详细、测试需求、UI/UX需求等)
     - 使用的模板(<full_task_template>或<minimal_task_template>)
     - 文件输出目标: `docs/tasks/{需求名称}/TASK-XXXX.md`
     - 可靠性级别的赋予规则
     - 注意事项: "创建此阶段的所有任务文件。中途不要停止。"
  5. 等待所有Task工具的执行完成
  6. 确认创建的文件数与识别的任务数一致

- 在各任务文件中包含以下内容:
  - 任务整体的可靠性级别(🔵🟡🔴)
  - 实现详细的各项目的可靠性级别(🔵🟡🔴)
  - 测试需求的各项目的可靠性级别(🔵🟡🔴)
  - 文件末尾的可靠性级别摘要
  - 相关文档链接(overview、需求定义、设计文档)

- **检查点**:
  - 识别的任务数: {N}件
  - 创建的文件数: {N}件
  - 按阶段创建数的确认(Phase 1: X件, Phase 2: Y件, ...)
  - 确认所有任务文件已创建

**重要**:
- 在传递给各Task工具的提示中,包含该阶段全任务的完整信息
- 让代理能够在不进行额外上下文收集的情况下创建所有文件
- 在1个消息中发送多个阶段的Task tool calls,最大化并行执行

- 执行step6

## step6: 创建overview和完成报告

### 6.1 创建overview文件

- 在创建全任务文件后创建overview
- 汇总创建的任务文件信息
- 使用<overview_template>创建文件
- 输出到`docs/tasks/{需求名称}/overview.md`

### 6.2 质量评估

根据质量判定标准,评估创建的任务文件内容:
- 任务粒度的适当性
- 依赖关系的完整性
- 实现可能性
- 可靠性级别(🔵🟡🔴的分布)-汇总所有任务文件

向用户显示质量判定结果(包含所有文件统合的可靠性级别分布)

### 6.3 更新TODO

- 使用TodoWrite工具更新TODO状态
  - 将当前TODO标记为"completed"
  - 在TODO内容中反映任务分割阶段的完成
  - 在TODO中添加下一阶段"任务实现"
  - 在TODO内容中记录质量判定结果

### 6.4 完成报告

显示完成报告:
- step3收集的开发上下文信息摘要
- step4的访谈结果与设计文档的差异
- **确认创建文件数**:
  - 识别的任务总数: {N}件
  - 创建的任务文件数: {N}件
  - overview文件: 1件
  - ✅ 确认所有任务文件已创建
- 创建的文件路径列表(overview.md、各任务文件)
- 各任务文件的可靠性级别分布
- 全体可靠性级别分布(汇总所有任务文件)
- 任务总数、预计工时、阶段数
- 确认各文件内的链接设置正确

显示下一步骤:"推荐的下一步骤:使用`/tsumiki:kairo-implement`实现任务。要实现特定任务请像`/tsumiki:kairo-implement TASK-0001`这样指定。"

# rules

## 文件名规则

### 输出文件路径格式
- `docs/tasks/{需求名称}/overview.md`
- `docs/tasks/{需求名称}/TASK-0001.md` (1文件1任务)
- `docs/tasks/{需求名称}/TASK-0002.md`
- (全任务份)

### 文件名命名规则
- 将需求名称转换为简洁的英语
- 使用kebab-case(短横线分隔)
- 控制在最多50字符左右
- 例:
  - "用户认证系统" → "user-auth-system"
  - "数据导出功能" → "data-export"
  - "密码重置" → "password-reset"

## 质量判定标准

```
✅ 高质量:
- 任务粒度: 适当(1天单位)
- 依赖关系: 完全定义
- 实现可能性: 确定
- 可靠性级别: 🔵(绿灯)居多

⚠️ 需改进:
- 任务存在模糊部分
- 依赖关系不明确
- 技术约束不明
- 需要确认实现步骤
- 可靠性级别: 🟡🔴(黄·红灯)居多
```

## TODO更新模式

```
- 将当前TODO标记为"completed"
- 在TODO内容中反映任务分割阶段的完成
- 在TODO中添加下一阶段"任务实现"
- 在TODO内容中记录质量判定结果
```

## 可靠性级别指示

对于各项目,请用以下信号注释与原始资料(需求定义书·设计文档·用户访谈)的对照情况:

- 🔵 **绿灯**: 参考需求定义书·设计文档·用户访谈几乎没有推测的情况
- 🟡 **黄灯**: 根据需求定义书·设计文档·用户访谈进行合理推测的情况
- 🔴 **红灯**: 需求定义书·设计文档·用户访谈中没有的推测情况

## 文件路径记载规则

- **使用基于项目根目录的相对路径**
- 不记载完整路径(绝对路径)
- 例:
  - ❌ `/Users/username/projects/myapp/src/utils/helper.ts`
  - ✅ `src/utils/helper.ts`

## 按工作规模调整输出

### 详细任务分割
- 包含所有部分
- 创建详细的实现步骤
- 创建全面的测试用例
- 涵盖UI/UX需求

### 轻量任务分割
- 仅基本任务定义
- 仅主要实现步骤
- 仅基本测试需求
- UI/UX需求最低限度

### 自定义
- 仅包含选择的项目

## 任务过程定义

### TDD任务
1. `/tsumiki:tdd-requirements` - 详细需求定义
2. `/tsumiki:tdd-testcases` - 测试用例创建
3. `/tsumiki:tdd-red` - 测试实现(失败)
4. `/tsumiki:tdd-green` - 最小实现
5. `/tsumiki:tdd-refactor` - 重构
6. `/tsumiki:tdd-verify-complete` - 质量确认

### DIRECT任务
1. `/tsumiki:direct-setup` - 直接实现·设置
2. `/tsumiki:direct-verify` - 动作确认·质量确认

# info

## AskUserQuestion工具使用示例

所有访谈都使用AskUserQuestion工具进行。以下是具体的使用示例。

### 确认任务粒度

```
AskUserQuestion({
  questions: [{
    question: "关于任务粒度,以1天(8小时)为单位是否有问题?",
    header: "任务粒度",
    multiSelect: false,
    options: [
      {
        label: "1天单位没问题",
        description: "8小时单位的任务分割"
      },
      {
        label: "需要更细的分割",
        description: "半天(4小时)单位等"
      }
    ]
  }]
})
```

### 确认优先级

```
AskUserQuestion({
  questions: [{
    question: "请告诉我以下任务组的实现优先级",
    header: "优先级",
    multiSelect: false,
    options: [
      {
        label: "基础→后端→前端",
        description: "标准实现顺序"
      },
      {
        label: "前端优先",
        description: "重视UI/UX的早期确认"
      },
      {
        label: "并行开发",
        description: "尽可能并行开发"
      }
    ]
  }]
})
```

### 确认测试需求

```
AskUserQuestion({
  questions: [{
    question: "请告诉我单元测试的覆盖率目标",
    header: "覆盖率",
    multiSelect: false,
    options: [
      {
        label: "80%以上",
        description: "目标高覆盖率"
      },
      {
        label: "60%以上",
        description: "标准覆盖率"
      },
      {
        label: "仅主要功能",
        description: "最小限度测试"
      }
    ]
  }]
})
```

### 注意事项

- **header**是12字符以内的短标签
- **question**是明确具体的问题文
- **options**是2-4个选项
- **multiSelect**在可多选的情况下为true
- 用户始终可以选择"其他"进行自由描述(自动提供)

# templates

<overview_template>
# {需求名称} 任务概要

**创建日期**: {创建日期时间}
**项目期间**: {开始日} - {结束日}({总天数}天)
**预计工时**: {总工时}小时
**总任务数**: {任务数}件

## 相关文档

- **需求定义书**: [📋 requirements.md](../spec/{需求名称}/requirements.md)
- **设计文档**: [📐 architecture.md](../design/{需求名称}/architecture.md)
- **API规范**: [🔌 api-endpoints.md](../design/{需求名称}/api-endpoints.md)
- **数据库设计**: [🗄️ database-schema.sql](../design/{需求名称}/database-schema.sql)
- **接口定义**: [📝 interfaces.ts](../design/{需求名称}/interfaces.ts)
- **数据流图**: [🔄 dataflow.md](../design/{需求名称}/dataflow.md)
- **上下文笔记**: [📝 note.md](../spec/{需求名称}/note.md)

## 阶段构成

| 阶段 | 期间 | 成果物 | 任务数 | 工时 | 文件 |
|---------|------|--------|----------|------|----------|
| Phase 1 | {期间} | {成果物} | {件数} | {工时}h | [TASK-0001~0010](#phase-1-基础构建) |
| Phase 2 | {期间} | {成果物} | {件数} | {工时}h | [TASK-0011~0020](#phase-2-后端实现) |
| Phase 3 | {期间} | {成果物} | {件数} | {工时}h | [TASK-0021~0030](#phase-3-前端实现) |
| Phase 4 | {期间} | {成果物} | {件数} | {工时}h | [TASK-0031~0040](#phase-4-集成测试) |

## 任务编号管理

**已使用任务编号**: TASK-0001 ~ TASK-{最终编号}
**下次开始编号**: TASK-{下一个编号}

## 整体进度

- [ ] Phase 1: 基础构建
- [ ] Phase 2: 后端实现
- [ ] Phase 3: 前端实现
- [ ] Phase 4: 集成测试

## 里程碑

- **M1: 基础完成** ({日期}): 数据库·环境构建完成
- **M2: API完成** ({日期}): 后端API实现完成
- **M3: UI完成** ({日期}): 前端实现完成
- **M4: 发布准备完成** ({日期}): 全测试完成

---

## Phase 1: 基础构建

**期间**: {期间}
**目标**: {目标}
**成果物**: {成果物}

### 任务列表

- [ ] [TASK-0001: {任务名}](TASK-0001.md) - {预计工时}h ({类型}) 🔵
- [ ] [TASK-0002: {任务名}](TASK-0002.md) - {预计工时}h ({类型}) 🔵
- [ ] [TASK-0003: {任务名}](TASK-0003.md) - {预计工时}h ({类型}) 🟡

### 依赖关系

```
TASK-0001 → TASK-0002
TASK-0001 → TASK-0003
```

---

## Phase 2: 后端实现

**期间**: {期间}
**目标**: {目标}
**成果物**: {成果物}

### 任务列表

- [ ] [TASK-0011: {任务名}](TASK-0011.md) - {预计工时}h ({类型}) 🔵
- [ ] [TASK-0012: {任务名}](TASK-0012.md) - {预计工时}h ({类型}) 🔵

### 依赖关系

```
TASK-0003 → TASK-0011
TASK-0011 → TASK-0012
```

---

## Phase 3: 前端实现

**期间**: {期间}
**目标**: {目标}
**成果物**: {成果物}

### 任务列表

- [ ] [TASK-0021: {任务名}](TASK-0021.md) - {预计工时}h ({类型}) 🔵
- [ ] [TASK-0022: {任务名}](TASK-0022.md) - {预计工时}h ({类型}) 🟡

### 依赖关系

```
TASK-0012 → TASK-0021
TASK-0021 → TASK-0022
```

---

## Phase 4: 集成测试

**期间**: {期间}
**目标**: {目标}
**成果物**: {成果物}

### 任务列表

- [ ] [TASK-0031: {任务名}](TASK-0031.md) - {预计工时}h ({类型}) 🔵
- [ ] [TASK-0032: {任务名}](TASK-0032.md) - {预计工时}h ({类型}) 🔵

### 依赖关系

```
TASK-0022 → TASK-0031
TASK-0031 → TASK-0032
```

---

## 可靠性级别摘要

### 全任务统计

- **总任务数**: {件数}件
- 🔵 **绿灯**: {件数}件 ({百分比}%)
- 🟡 **黄灯**: {件数}件 ({百分比}%)
- 🔴 **红灯**: {件数}件 ({百分比}%)

### 按阶段的可靠性

| 阶段 | 🔵 绿 | 🟡 黄 | 🔴 红 | 合计 |
|---------|-------|-------|-------|------|
| Phase 1 | {件数} | {件数} | {件数} | {件数} |
| Phase 2 | {件数} | {件数} | {件数} | {件数} |
| Phase 3 | {件数} | {件数} | {件数} | {件数} |
| Phase 4 | {件数} | {件数} | {件数} | {件数} |

**质量评估**: {高质量/需改进/需访谈}

## 关键路径

```
TASK-0001 → TASK-0002 → TASK-0011 → TASK-0012 → TASK-0021 → TASK-0031 → TASK-0032
```

**关键路径工时**: {工时}小时
**可并行作业工时**: {工时}小时

## 下一步骤

要实现任务:
- 按顺序实现全任务: `/tsumiki:kairo-implement`
- 实现特定任务: `/tsumiki:kairo-implement TASK-0001`
</overview_template>

<full_task_template>
# TASK-{任务编号}: {任务名}

**任务ID**: TASK-{任务编号}
**任务类型**: {TDD/DIRECT}
**预计工时**: {工时}小时
**阶段**: Phase {阶段编号} - {阶段名}
**可靠性级别**: {🔵/🟡/🔴} *{出处}*

## 相关文档

- **概要**: [📋 overview.md](overview.md)
- **需求定义**: [📋 requirements.md](../../spec/{需求名称}/requirements.md) - {相关需求ID}
- **设计文档**: [📐 architecture.md](../../design/{需求名称}/architecture.md)
- **API规范**: [🔌 api-endpoints.md](../../design/{需求名称}/api-endpoints.md)

## 任务概要

{任务概要说明}

## 依赖任务

- **前提任务**: [TASK-{编号}: {任务名}](TASK-{编号}.md)
- **后续任务**: [TASK-{编号}: {任务名}](TASK-{编号}.md)

## 完成条件

- [ ] {完成条件1}
- [ ] {完成条件2}
- [ ] {完成条件3}

---

## 实现详细

### 1. {实现项目1} 🔵

**可靠性**: 🔵 *来自设计文档 architecture.md*

{实现内容详细}

**实现文件**: `{文件路径}`

```typescript
// 实现示例
{代码示例}
```

### 2. {实现项目2} 🟡

**可靠性**: 🟡 *根据设计文档的合理推测*

{实现内容详细}

**实现文件**: `{文件路径}`

### 3. {实现项目3} 🔵

**可靠性**: 🔵 *来自API规范书*

{实现内容详细}

---

## 单元测试需求

### 测试用例1: {测试用例名} 🔵

**可靠性**: 🔵 *来自需求定义书 REQ-001*

**Given**: {前提条件}
**When**: {执行条件}
**Then**: {期待结果}

**测试文件**: `{测试文件路径}`

```typescript
// 测试代码示例
describe('{测试对象}', () => {
  it('{测试用例}', async () => {
    // 测试实现
  });
});
```

### 测试用例2: {测试用例名} 🟡

**可靠性**: 🟡 *根据现有实现的合理推测*

**Given**: {前提条件}
**When**: {执行条件}
**Then**: {期待结果}

---

## 集成测试需求

### 集成测试1: {测试名} 🔵

**可靠性**: 🔵 *来自 dataflow.md*

**测试内容**: {测试内容}
**期待结果**: {期待结果}

---

## UI/UX需求

### 加载状态 🔵

**可靠性**: 🔵 *来自需求定义书 NFR-201*

- {加载状态详细}

### 错误显示 🟡

**可靠性**: 🟡 *根据现有实现的合理推测*

- {错误显示详细}

### 移动端对应 🔵

**可靠性**: 🔵 *来自需求定义书 NFR-202*

- {移动端对应详细}

### 无障碍 🔵

**可靠性**: 🔵 *来自需求定义书 NFR-203*

- {无障碍需求详细}

---

## 实现步骤

### TDD任务的情况

1. `/tsumiki:tdd-requirements TASK-{编号}` - 详细需求定义
2. `/tsumiki:tdd-testcases` - 测试用例创建
3. `/tsumiki:tdd-red` - 测试实现(失败)
4. `/tsumiki:tdd-green` - 最小实现
5. `/tsumiki:tdd-refactor` - 重构
6. `/tsumiki:tdd-verify-complete` - 质量确认

### DIRECT任务的情况

1. `/tsumiki:direct-setup` - 直接实现·设置
2. `/tsumiki:direct-verify` - 动作确认·质量确认

---

## 注意事项

- {注意事项1}
- {注意事项2}

---

## 可靠性级别摘要

### 按项目可靠性

| 类别 | 🔵 绿 | 🟡 黄 | 🔴 红 | 合计 |
|---------|-------|-------|-------|------|
| 实现详细 | {件数} | {件数} | {件数} | {件数} |
| 单元测试 | {件数} | {件数} | {件数} | {件数} |
| 集成测试 | {件数} | {件数} | {件数} | {件数} |
| UI/UX需求 | {件数} | {件数} | {件数} | {件数} |

### 全体评估

- **总项目数**: {件数}项目
- 🔵 **绿灯**: {件数}项目 ({百分比}%)
- 🟡 **黄灯**: {件数}项目 ({百分比}%)
- 🔴 **红灯**: {件数}项目 ({百分比}%)

**质量评估**: {高质量/需改进/需访谈}

**推测较多的项目**: {推测较多项目的列表}
</full_task_template>

<minimal_task_template>
# TASK-{任务编号}: {任务名}

**任务ID**: TASK-{任务编号}
**任务类型**: {TDD/DIRECT}
**预计工时**: {工时}小时
**阶段**: Phase {阶段编号} - {阶段名}
**可靠性级别**: {🔵/🟡/🔴} *{出处}*

## 相关文档

- **概要**: [📋 overview.md](overview.md)
- **需求定义**: [📋 requirements.md](../../spec/{需求名称}/requirements.md) - {相关需求ID}
- **设计文档**: [📐 architecture.md](../../design/{需求名称}/architecture.md)

## 任务概要

{任务概要说明}

## 依赖任务

- **前提任务**: [TASK-{编号}](TASK-{编号}.md)
- **后续任务**: [TASK-{编号}](TASK-{编号}.md)

## 完成条件

- [ ] {完成条件1}
- [ ] {完成条件2}

---

## 主要实现项目

### {实现项目1} 🔵

**可靠性**: 🔵 *{出处}*

{实现内容}

**实现文件**: `{文件路径}`

### {实现项目2} 🟡

**可靠性**: 🟡 *{出处}*

{实现内容}

---

## 基本测试需求

### {测试用例名} 🔵

**可靠性**: 🔵 *{出处}*

- {测试内容}

---

## 实现步骤

### TDD任务的情况

1. `/tsumiki:tdd-requirements TASK-{编号}` - 详细需求定义
2. `/tsumiki:tdd-testcases` - 测试用例创建
3. `/tsumiki:tdd-red` - 测试实现(失败)
4. `/tsumiki:tdd-green` - 最小实现
5. `/tsumiki:tdd-refactor` - 重构
6. `/tsumiki:tdd-verify-complete` - 质量确认

### DIRECT任务的情况

1. `/tsumiki:direct-setup` - 直接实现·设置
2. `/tsumiki:direct-verify` - 动作确认·质量确认

---

## 可靠性级别摘要

- **总项目数**: {件数}项目
- 🔵 **绿灯**: {件数}项目 ({百分比}%)
- 🟡 **黄灯**: {件数}项目 ({百分比}%)
- 🔴 **红灯**: {件数}项目 ({百分比}%)

**质量评估**: {高质量/需改进/需访谈}
</minimal_task_template>
