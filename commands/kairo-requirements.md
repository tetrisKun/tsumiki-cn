---
description: 分析用户提供的需求概要,使用EARS(Easy Approach to Requirements Syntax)记法创建包含详细验收标准的需求定义文档。
allowed-tools: Read, Glob, Grep, Task, Write, Edit, TodoWrite, WebFetch, AskUserQuestion
argument-hint: [需求名称] [PRD文件路径(optional)]
---
实施Kairo开发的需求整理,参照PRD·EARS需求定义文档·设计文档明确功能规范。在展示可靠性级别的同时创建需求定义。

# context

输出目录="docs/spec"
需求名称={{requirement_name}}
PRD文件={{prd_file_path}}
作业规模={{work_scope}}
可靠性评估=[]

# step

- 如果没有$ARGUMENTS,显示"请在参数中指定需求名称(例:用户认证系统)。如果有PRD文件,也请指定路径(例:用户认证系统 docs/prd/auth-prd.md)"后结束
- 向用户声明$ARGUMENTS的内容和context的内容
- 执行step2

## step2: 确认工作范围

- 使用AskUserQuestion工具询问工作规模:
  - question: "请告诉我这个需求的工作规模"
  - header: "工作规模"
  - multiSelect: false
  - options:
    - label: "完整功能开发(推荐)"
      description: "详细的EARS需求定义、全面的用户故事、完整的验收标准、包含非功能需求和边缘案例"
    - label: "轻量开发"
      description: "必要最小限的需求定义、仅基本用户故事、仅主要验收标准、非功能需求最低限度"
    - label: "自定义"
      description: "单独选择要包含的项目"

- 将用户的选择保存到context的{{work_scope}}

- 如果选择了自定义,使用AskUserQuestion工具询问以下内容:
  - question: "请选择要包含在需求定义文档中的项目(可多选)"
  - header: "包含项目"
  - multiSelect: true
  - options:
    - label: "详细的用户故事"
      description: "创建全面的用户故事"
    - label: "非功能需求详细化"
      description: "性能·安全等详细的非功能需求"
    - label: "边缘案例的识别"
      description: "错误处理·边界值等边缘案例"
    - label: "性能需求"
      description: "详细的性能需求定义"

- 执行step3

## step3: 准备开发上下文

- **读取任务笔记**
  - 如果`docs/spec/{需求名称}/note.md`存在则读取
  - 如果不存在:
    - 使用Task工具执行subagent_type: "general-purpose"来运行`/jimu:kairo-tasknote {需求名称}`命令生成笔记
    - 读取生成的笔记文件
  - 笔记包含技术栈、开发规则、相关实现、设计文档、注意事项

- **读取PRD文件**(如果在参数中指定)
  - 如果指定了{{prd_file_path}}则读取
  - PRD(Product Requirements Document)期望包含以下内容:
    - 产品愿景
    - 目标用户
    - 主要功能
    - 业务需求
    - 成功指标

- **读取附加规则**
  - 如果`docs/rule`目录存在则读取
  - 如果`docs/rule/kairo`目录存在则读取
  - 如果`docs/rule/kairo/requirements`目录存在则读取
  - 读取各目录内的所有文件,作为附加规则应用

- **收集项目基本信息**
  - 读取`CLAUDE.md`的内容(项目概要·技术栈·约束)
  - 如果`README.md`存在则读取
  - 了解项目结构(目录组成)

- **调查现有设计文档·规范书**
  - 确认`docs/`目录下的相关设计文档
  - 读取现有的需求定义书·设计书
  - 确认任务管理文件(phase*.md)的内容
  - 如果有API规范书·数据库设计书则确认

- **分析现有代码库·开发状况**(可选)
  - 使用AskUserQuestion工具向用户确认:
    - question: "是否需要详细分析现有代码库?"
    - header: "代码分析"
    - multiSelect: false
    - options:
      - label: "需要"
        description: "实施现有规范·实现的全面调查、开发状况·进度确认、差异分析"
      - label: "不需要"
        description: "仅使用设计文档创建需求定义"
  - 仅当选择"需要"时:
    - 使用@task agent-symbol-searcher进行现有规范·实现的全面调查
    - 使用git status/log确认当前开发状况·进度
    - 已实现功能 vs 设计书的差异分析
    - 识别剩余任务·未实现部分

- **创建收集信息摘要**
  - 整理现有项目的全貌
  - 识别已定义需求·未定义部分
  - 整理技术约束·非功能需求
  - 差距分析(设计 vs 实现 vs 用户期待)

- 读取完成后,执行step4

## step4: 基于现有信息的差异访谈

根据工作规模调整访谈项目。
**重要**:以下问题是示例,应根据实际项目情况使用AskUserQuestion工具创建适当的问题。

### 完整功能开发的情况

对于每个类别,使用AskUserQuestion工具询问从现有信息(PRD、设计文档、实现)中识别的具体课题·不明点:

**确认现有设计的合理性·是否充足**
- 如果需要确认现有功能需求·非功能需求,询问具体项目
- 如果对当前约束事项(性能·数据限制等)的合理性有疑问,询问相关内容
- 如果需要确认技术栈选择,连同理由一起询问
- 如果发现现有设计中难以实现·不适当的部分,连同替代方案一起询问

例:使用AskUserQuestion工具如下询问
- question: "关于当前CLAUDE.md中定义的{具体约束事项},在实际运营中是否有问题?"
- header: "约束确认"
- multiSelect: false
- options:
  - label: "没问题"
    description: "当前约束事项可以运营"
  - label: "需要变更"
    description: "需要重新审视约束(在其他中填写详细内容)"

**详细化未定义·模糊部分的访谈**
- 关于设计文档中详细信息不明的功能,询问具体动作
- 询问用户实际的业务流程·用例
- 询问输入输出数据的详细规范
- 询问UI/UX的具体期待值

**识别追加·变更需求**
- 询问现有设计中没有的新功能需求
- 询问外部系统集成的追加需求
- 询问报告·分析功能等的追加需求
- 询问运营·维护需求的追加

**确认对现有功能的影响范围**
- 询问新需求对现有功能的影响
- 询问对性能需求的影响
- 询问对安全·无障碍需求的影响
- 询问数据迁移·兼容性需求

**优先级·范围调整**
如果有多个需求,使用AskUserQuestion工具询问优先级:
- question: "请告诉我以下需求的优先级(可多选)"
- header: "优先级"
- multiSelect: true
- options: (从实际需求列表动态生成)

### 轻量开发的情况

**仅确认必需项目**
使用AskUserQuestion工具,简洁地询问以下项目:
- 确认主要功能需求(约3-5项)
- 确认基本约束事项
- 确认最低限度的错误案例
- 优先级(仅Must Have)

### 自定义开发的情况

仅实施与step2中选择项目相关的访谈。
使用AskUserQuestion工具,根据选择的项目创建问题。

**注意事项**:
- 不要一次性提出所有问题,而是根据上下文逐步提问
- 根据用户的回答,必要时进行追加提问
- 问题应具体,能用是/否回答或从选项中选择
- 如果需要自由描述,准备"其他"选项

**创建访谈记录**:
- 记录所有问题和回答
- 对于每个问题,记录以下内容:
  - 问题内容
  - 提问日期时间
  - 类别(现有设计确认/未定义部分详细化/追加需求/影响范围/优先级)
  - 问题背景(为什么需要这个问题)
  - 用户的回答
  - 对可靠性的影响(此回答如何改变可靠性级别)
- 创建访谈结果摘要:
  - 确认的事项
  - 追加/变更需求
  - 剩余课题
  - 可靠性级别分布(访谈前后的比较)
- 此记录稍后将作为`interview-record.md`输出

- 执行step5

## step5: 创建统一需求定义文档

- 根据工作规模选择<requirements_template>:
  - 完整功能开发: <full_requirements_template>
  - 轻量开发: <minimal_requirements_template>
  - 自定义: 根据选择项目的组合

- 用context的信息填充模板,直接创建以下文件
  - 活用读取的上下文信息(任务笔记、附加规则、PRD等)
  - **重要**:在所有文件的所有项目中记载可靠性级别(🔵🟡🔴)
  - 使用Write工具保存到输出文件

- **输出文件**:
  1. `docs/spec/{需求名称}/requirements.md`: 统一功能需求和相关文档链接
     - 使用<full_requirements_template>或<minimal_requirements_template>
     - 在各需求中记载可靠性级别(🔵🟡🔴)和来源

  2. `docs/spec/{需求名称}/interview-record.md`: 访谈记录
     - 使用<interview_record_template>
     - 记录step4的问题和回答
     - 记录可靠性级别的变化

  3. 完整功能开发的情况:
     - `docs/spec/{需求名称}/user-stories.md`: 详细的用户故事
       - 使用<user_stories_template>
       - **重要**:在各故事中记载可靠性级别(🔵🟡🔴)和来源
       - 包含可靠性级别摘要

     - `docs/spec/{需求名称}/acceptance-criteria.md`: 验收标准和测试项目
       - 使用<acceptance_criteria_template>
       - **重要**:在各验收标准和测试用例中记载可靠性级别(🔵🟡🔴)和来源
       - 包含可靠性级别分布

- 根据质量判定标准,评估创建的需求定义文档内容:
  - 需求的模糊性有无
  - 输入输出定义的完整性
  - 约束条件的明确性
  - 实现可能性
  - 可靠性级别(🔵🟡🔴的分布)-汇总所有文件

- 向用户显示质量判定结果(包含所有文件统合的可靠性级别分布)
- 执行step6

## step6: 完成报告和TODO更新

- 使用TodoWrite工具更新TODO状态
  - 将当前TODO标记为"completed"
  - 在TODO内容中反映需求定义阶段的完成
  - 在TODO中添加下一阶段"设计文档创建"
  - 在TODO内容中记录质量判定结果

- 显示完成报告:
  - Phase 0收集的现有项目信息摘要
  - Phase 1的访谈结果与现有信息的差异
  - 创建的文件路径列表(requirements.md, interview-record.md, user-stories.md, acceptance-criteria.md)
  - 各文件的可靠性级别分布
  - 全体可靠性级别分布(汇总所有文件)
  - 与现有需求的变更点·追加点的数量
  - 确认各文件内的链接设置正确
  - 提示与现有设计书·实现的一致性确认信息

- 显示下一步骤:"推荐的下一步骤:使用`/jimu:kairo-design {需求名称}`创建技术设计文档。"

# rules

## 文件名规则

### 输出文件路径格式
- `docs/spec/{需求名称}/requirements.md`
- `docs/spec/{需求名称}/interview-record.md`
- `docs/spec/{需求名称}/user-stories.md` (仅完整功能开发)
- `docs/spec/{需求名称}/acceptance-criteria.md` (仅完整功能开发)
- `docs/spec/{需求名称}/note.md` (上下文笔记)

### 文件名命名规则
- 将需求名称转换为简洁的英语
- 使用kebab-case(短横线分隔)
- 控制在最多50字符左右
- 例:
  - "用户认证系统" → "user-auth-system"
  - "数据导出功能" → "data-export"
  - "密码重置" → "password-reset"

## 质量判定标准

```
✅ 高质量:
- 需求的模糊性: 无
- 输入输出定义: 完整
- 约束条件: 明确
- 实现可能性: 确定
- 可靠性级别: 🔵(绿灯)居多

⚠️ 需改进:
- 需求存在模糊部分
- 输入输出的详细信息不明确
- 技术约束不明
- 需要确认用户意图
- 可靠性级别: 🟡🔴(黄·红灯)居多
```

## TODO更新模式

```
- 将当前TODO标记为"completed"
- 在TODO内容中反映需求定义阶段的完成
- 在TODO中添加下一阶段"设计文档创建"
- 在TODO内容中记录质量判定结果
```

## 可靠性级别指示

对于各项目,请用以下信号注释与原始资料(PRD·EARS需求定义文档·设计文档·用户访谈)的对照情况:

- 🔵 **绿灯**: 参考PRD·EARS需求定义文档·设计文档·用户访谈几乎没有推测的情况
- 🟡 **黄灯**: 根据PRD·EARS需求定义文档·设计文档·用户访谈进行合理推测的情况
- 🔴 **红灯**: PRD·EARS需求定义文档·设计文档·用户访谈中没有的推测情况

## 文件路径记载规则

- **使用基于项目根目录的相对路径**
- 不记载完整路径(绝对路径)
- 例:
  - ❌ `/Users/username/projects/myapp/src/utils/helper.ts`
  - ✅ `src/utils/helper.ts`

## 按工作规模调整输出

### 完整功能开发
- 包含所有部分
- 创建详细的用户故事
- 创建全面的验收标准
- 涵盖非功能需求·边缘案例

### 轻量开发
- 仅功能需求的主要项目(3-5项)
- 用户故事在requirements.md内简要记载
- 验收标准仅基本项目
- 非功能需求最低限度

### 自定义
- 仅包含选择的项目
- 根据需要分割文件

# info

## AskUserQuestion工具使用示例

所有访谈都使用AskUserQuestion工具进行。以下是具体的使用示例。

### 现有设计确认类问题

```
AskUserQuestion({
  questions: [{
    question: "关于当前CLAUDE.md中定义的{具体约束事项},在实际运营中是否有问题?",
    header: "约束确认",
    multiSelect: false,
    options: [
      {
        label: "没问题",
        description: "当前约束事项可以运营"
      },
      {
        label: "需要变更",
        description: "需要重新审视约束"
      }
    ]
  }]
})
```

### 详细化类问题(多选)

```
AskUserQuestion({
  questions: [{
    question: "请选择此功能需要的操作",
    header: "需要的操作",
    multiSelect: true,
    options: [
      {
        label: "数据添加",
        description: "添加新数据的功能"
      },
      {
        label: "数据编辑",
        description: "编辑现有数据的功能"
      },
      {
        label: "数据删除",
        description: "删除数据的功能"
      },
      {
        label: "数据搜索",
        description: "搜索数据的功能"
      }
    ]
  }]
})
```

### 追加需求类问题

```
AskUserQuestion({
  questions: [{
    question: "是否需要报告·分析功能?",
    header: "报告功能",
    multiSelect: false,
    options: [
      {
        label: "需要",
        description: "实现报告·分析功能"
      },
      {
        label: "不需要",
        description: "不需要报告功能"
      }
    ]
  }]
})
```

### 确认优先级(多个问题)

```
AskUserQuestion({
  questions: [
    {
      question: "在以下需求中,请选择Must Have(必需)项目",
      header: "Must Have",
      multiSelect: true,
      options: [
        {
          label: "用户认证",
          description: "登录·登出功能"
        },
        {
          label: "数据管理",
          description: "CRUD操作"
        },
        {
          label: "报告功能",
          description: "数据汇总·输出"
        }
      ]
    },
    {
      question: "请告诉我关于发布范围",
      header: "发布计划",
      multiSelect: false,
      options: [
        {
          label: "一次性发布",
          description: "同时发布所有功能"
        },
        {
          label: "分阶段发布",
          description: "按阶段逐步发布"
        }
      ]
    }
  ]
})
```

### 影响确认类问题

```
AskUserQuestion({
  questions: [{
    question: "此新功能导致的现有{功能名}的变更是否可接受?",
    header: "影响容许度",
    multiSelect: false,
    options: [
      {
        label: "可接受",
        description: "容许现有功能的变更"
      },
      {
        label: "希望最小化",
        description: "将对现有功能的影响最小化"
      },
      {
        label: "不可变更",
        description: "不变更现有功能"
      }
    ]
  }]
})
```

### 注意事项

- **header**是12字符以内的短标签
- **question**是明确具体的问题文
- **options**是2-4个选项
- **multiSelect**在可多选的情况下为true
- 用户始终可以选择"其他"进行自由描述(自动提供)

<full_requirements_template>
# {需求名称} 需求定义文档

## 概要

{需求概要}

## 相关文档

- **访谈记录**: [💬 interview-record.md](interview-record.md)
- **用户故事**: [📖 user-stories.md](user-stories.md)
- **验收标准**: [✅ acceptance-criteria.md](acceptance-criteria.md)
- **上下文笔记**: [📝 note.md](note.md)
{如果有PRD: - **PRD**: [{PRD文件名}]({PRD文件路径})}

## 功能需求(EARS记法)

**【可靠性级别图例】**:
- 🔵 **绿灯**: 参考PRD·EARS需求定义文档·设计文档·用户访谈的确定需求
- 🟡 **黄灯**: 根据PRD·EARS需求定义文档·设计文档·用户访谈进行合理推测的需求
- 🔴 **红灯**: PRD·EARS需求定义文档·设计文档·用户访谈中没有的推测需求

### 通常需求

- REQ-001: 系统必须{通常动作} 🔵 *来自PRD第3章*
- REQ-002: 系统必须{通常动作} 🟡 *根据设计文档的合理推测*

### 条件需求

- REQ-101: 在{条件}的情况下,系统必须{动作} 🔵 *来自2024-01-15用户访谈*

### 状态需求

- REQ-201: 在{状态}的情况下,系统必须{动作} 🟡 *根据数据库设计书的合理推测*

### 可选需求

- REQ-301: 系统可以{可选功能} 🔵 *来自CLAUDE.md技术约束*

### 约束需求

- REQ-401: 系统必须{约束事项} 🔵 *来自CLAUDE.md·现有实现*

## 非功能需求

### 性能

- NFR-001: {性能需求} 🟡 *根据CLAUDE.md约束的合理推测*

### 安全

- NFR-101: {安全需求} 🔵 *来自安全设计书·实现*

### 可用性

- NFR-201: {可用性需求} 🔵 *来自2024-01-20用户访谈UX需求*

## 边缘案例

### 错误处理

- EDGE-001: {错误案例} 🟡 *根据现有实现的合理推测*

### 边界值

- EDGE-101: {边界值案例} 🔵 *来自API规范书·测试用例*
</full_requirements_template>

<minimal_requirements_template>
# {需求名称} 需求定义文档(轻量版)

## 概要

{需求概要}

## 相关文档

- **访谈记录**: [💬 interview-record.md](interview-record.md)
- **上下文笔记**: [📝 note.md](note.md)
{如果有PRD: - **PRD**: [{PRD文件名}]({PRD文件路径})}

## 主要功能需求

**【可靠性级别图例】**:
- 🔵 **绿灯**: 参考PRD·设计文档·用户访谈的确定需求
- 🟡 **黄灯**: 根据PRD·设计文档·用户访谈进行合理推测的需求
- 🔴 **红灯**: PRD·设计文档·用户访谈中没有的推测需求

### 必需功能(Must Have)

- REQ-001: {主要功能1} 🔵 *来自PRD*
- REQ-002: {主要功能2} 🔵 *来自用户访谈*
- REQ-003: {主要功能3} 🟡 *根据设计文档的合理推测*

### 基本约束

- REQ-401: {基本约束事项} 🔵 *来自CLAUDE.md*

## 简易用户故事

### 故事1: {功能名}

**我作为** {用户类型}
**想要{具体行动}**
**以便** {获得价值}

**相关需求**: REQ-001

## 基本验收标准

### REQ-001: {需求名}

**Given(前提条件)**: {测试执行前的状态}
**When(执行条件)**: {执行的动作}
**Then(期待结果)**: {期待的输出·状态}

**测试用例**:
- [ ] 正常系: {正常案例的详细信息}
- [ ] 主要异常系: {主要异常案例}

## 最低限度非功能需求

- **性能**: {基本性能要求}
- **安全**: {最低限度安全要求}
</minimal_requirements_template>

<interview_record_template>
# {需求名称} 访谈记录

**创建日期**: {创建日期时间}
**访谈实施**: step4 基于现有信息的差异访谈

## 访谈目的

确认现有设计文档·PRD·实现后,为明确不明点和模糊部分而实施了访谈。

## 问题和回答

### Q1: {问题内容}

**提问日期时间**: {日期时间}
**类别**: {现有设计确认/未定义部分详细化/追加需求/影响范围/优先级}
**背景**: {为什么需要这个问题}

**回答**: {用户的回答}

**对可靠性的影响**:
- 通过此回答,{受影响的需求ID}的可靠性级别从🔴提升到🔵
- {具体影响内容}

---

### Q2: {问题内容}

**提问日期时间**: {日期时间}
**类别**: {类别名}
**背景**: {背景说明}

**回答**: {用户的回答}

**对可靠性的影响**:
- 通过此回答,添加了新需求{需求ID}(可靠性级别: 🔵)

---

## 访谈结果摘要

### 确认的事项
- {确认事项1}
- {确认事项2}

### 追加/变更需求
- {追加需求1}
- {变更需求1}

### 剩余课题
- {尚不明确的点1}
- {尚不明确的点2}

### 可靠性级别分布

**访谈前**:
- 🔵 绿灯: {数量}
- 🟡 黄灯: {数量}
- 🔴 红灯: {数量}

**访谈后**:
- 🔵 绿灯: {数量} (+{增加数})
- 🟡 黄灯: {数量} ({增减数})
- 🔴 红灯: {数量} (-{减少数})

## 相关文档

- **需求定义文档**: [requirements.md](requirements.md)
- **用户故事**: [user-stories.md](user-stories.md)
- **验收标准**: [acceptance-criteria.md](acceptance-criteria.md)
</interview_record_template>

<user_stories_template>
# {需求名称} 用户故事

**创建日期**: {创建日期时间}
**相关需求定义**: [requirements.md](requirements.md)
**访谈记录**: [interview-record.md](interview-record.md)

**【可靠性级别图例】**:
- 🔵 **绿灯**: 参考PRD·EARS需求定义文档·设计文档·用户访谈的确定故事
- 🟡 **黄灯**: 根据PRD·EARS需求定义文档·设计文档·用户访谈进行合理推测的故事
- 🔴 **红灯**: PRD·EARS需求定义文档·设计文档·用户访谈中没有的推测故事

---

## Epic 1: {Epic名称}

### 故事 1.1: {故事名称} 🔵

**可靠性**: 🔵 *来自PRD第2章·2024-01-15用户访谈*

**我作为** {用户类型(例:一般用户)}
**想要{具体行动(例:创建任务)}**
**以便** {获得价值(例:管理日常任务)}

**相关需求**: REQ-001, REQ-002

**详细场景**:
1. {步骤1的说明}
2. {步骤2的说明}
3. {步骤3的说明}

**前提条件**:
- {前提条件1}
- {前提条件2}

**约束事项**:
- {约束事项1}
- {约束事项2}

**优先级**: Must Have / Should Have / Could Have / Won't Have

---

### 故事 1.2: {故事名称} 🟡

**可靠性**: 🟡 *根据设计文档的合理推测*

**我作为** {用户类型}
**想要{具体行动}**
**以便** {获得价值}

**相关需求**: REQ-003

**详细场景**:
1. {步骤1的说明}
2. {步骤2的说明}

**前提条件**:
- {前提条件1}

**优先级**: Should Have

**备注**: {此推测的依据或需要确认的理由}

---

## Epic 2: {Epic名称}

### 故事 2.1: {故事名称} 🔵

**可靠性**: 🔵 *来自2024-01-20用户访谈*

**我作为** {用户类型}
**想要{具体行动}**
**以便** {获得价值}

**相关需求**: REQ-101, REQ-102

**详细场景**:
1. {步骤1的说明}
2. {步骤2的说明}
3. {步骤3的说明}

**优先级**: Must Have

---

## 故事地图

```
Epic 1: {Epic名称}
├── 故事 1.1 (🔵 Must Have)
├── 故事 1.2 (🟡 Should Have)
└── 故事 1.3 (🔵 Could Have)

Epic 2: {Epic名称}
├── 故事 2.1 (🔵 Must Have)
└── 故事 2.2 (🟡 Should Have)
```

## 可靠性级别摘要

- 🔵 绿灯: {数量}件 ({百分比}%)
- 🟡 黄灯: {数量}件 ({百分比}%)
- 🔴 红灯: {数量}件 ({百分比}%)

**质量评估**: {高质量/需改进/需访谈}
</user_stories_template>

<acceptance_criteria_template>
# {需求名称} 验收标准

**创建日期**: {创建日期时间}
**相关需求定义**: [requirements.md](requirements.md)
**相关用户故事**: [user-stories.md](user-stories.md)
**访谈记录**: [interview-record.md](interview-record.md)

**【可靠性级别图例】**:
- 🔵 **绿灯**: 参考PRD·EARS需求定义文档·设计文档·用户访谈的确定标准
- 🟡 **黄灯**: 根据PRD·EARS需求定义文档·设计文档·用户访谈进行合理推测的标准
- 🔴 **红灯**: PRD·EARS需求定义文档·设计文档·用户访谈中没有的推测标准

---

## REQ-001: {需求名} 🔵

**可靠性**: 🔵 *来自PRD第3章·测试用例规范书*

### Given(前提条件)
- {测试执行前的状态1}
- {测试执行前的状态2}

### When(执行条件)
- {用户执行的动作}

### Then(期待结果)
- {期待的输出1}
- {期待的状态变化2}

### 测试用例

#### 正常系

- [ ] **TC-001-01**: {测试用例名} 🔵
  - **输入**: {输入数据}
  - **期待结果**: {期待的输出}
  - **可靠性**: 🔵 *来自现有测试用例*

- [ ] **TC-001-02**: {测试用例名} 🔵
  - **输入**: {输入数据}
  - **期待结果**: {期待的输出}
  - **可靠性**: 🔵 *来自用户访谈*

#### 异常系

- [ ] **TC-001-E01**: {错误案例名} 🟡
  - **输入**: {异常输入数据}
  - **期待结果**: {错误消息/错误处理}
  - **可靠性**: 🟡 *根据现有实现的合理推测*

- [ ] **TC-001-E02**: {错误案例名} 🔵
  - **输入**: {异常输入数据}
  - **期待结果**: {错误消息/错误处理}
  - **可靠性**: 🔵 *来自错误处理规范书*

#### 边界值

- [ ] **TC-001-B01**: {边界值案例名} 🔵
  - **输入**: {边界值数据}
  - **期待结果**: {期待的动作}
  - **可靠性**: 🔵 *来自API规范书*

---

## REQ-002: {需求名} 🟡

**可靠性**: 🟡 *根据设计文档的合理推测*

### Given(前提条件)
- {测试执行前的状态}

### When(执行条件)
- {用户执行的动作}

### Then(期待结果)
- {期待的输出}

### 测试用例

#### 正常系

- [ ] **TC-002-01**: {测试用例名} 🟡
  - **输入**: {输入数据}
  - **期待结果**: {期待的输出}
  - **可靠性**: 🟡 *根据设计文档的推测*
  - **备注**: {需要确认的理由}

---

## 非功能需求测试

### NFR-001: 性能 🟡

**可靠性**: 🟡 *根据CLAUDE.md约束的合理推测*

- [ ] **TC-NFR-001-01**: {性能测试名}
  - **测量项目**: {响应时间/吞吐量等}
  - **目标值**: {具体数值}
  - **测量条件**: {负载条件等}
  - **可靠性**: 🟡 *根据技术约束的推测*

### NFR-101: 安全 🔵

**可靠性**: 🔵 *来自安全设计书·实现*

- [ ] **TC-NFR-101-01**: {安全测试名}
  - **验证内容**: {验证的漏洞}
  - **期待结果**: {期待的防御动作}
  - **可靠性**: 🔵 *来自安全设计书*

---

## 边缘案例测试

### EDGE-001: {错误处理案例} 🟡

**可靠性**: 🟡 *根据现有实现的合理推测*

- [ ] **TC-EDGE-001-01**: {边缘案例测试名}
  - **条件**: {特殊条件}
  - **期待结果**: {期待的动作}
  - **可靠性**: 🟡 *根据实现的推测*

---

## 测试用例摘要

### 按类别统计

| 类别 | 正常系 | 异常系 | 边界值 | 合计 |
|---------|--------|--------|--------|------|
| 功能需求 | {数量} | {数量} | {数量} | {数量} |
| 非功能需求 | {数量} | {数量} | {数量} | {数量} |
| 边缘案例 | {数量} | {数量} | {数量} | {数量} |
| **合计** | {数量} | {数量} | {数量} | {数量} |

### 可靠性级别分布

- 🔵 绿灯: {数量}件 ({百分比}%)
- 🟡 黄灯: {数量}件 ({百分比}%)
- 🔴 红灯: {数量}件 ({百分比}%)

**质量评估**: {高质量/需改进/需访谈}

### 按优先级的测试用例

- **Must Have**: {数量}件
- **Should Have**: {数量}件
- **Could Have**: {数量}件

---

## 测试实施计划

### Phase 1: 基本功能测试
- REQ-001 ~ REQ-050
- 优先级: Must Have
- 预定实施: {日期}

### Phase 2: 扩展功能测试
- REQ-051 ~ REQ-100
- 优先级: Should Have
- 预定实施: {日期}

### Phase 3: 非功能·边缘案例测试
- NFR-001 ~ NFR-999, EDGE-001 ~ EDGE-999
- 优先级: Must Have + Should Have
- 预定实施: {日期}
</acceptance_criteria_template>